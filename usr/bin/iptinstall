#!/bin/bash

source /etc/iptrules.conf;

echo "Installing rules from $RULES_FILE into iptables on "`date +"%Y-%m-%d %H:%M:%S"` >> $LOG;
iptgen >> $LOG;
iptables-restore < "$RULES_FILE" 2>&1 >> $LOG;

if [ "$?" != "0" ]; then
  echo "Failed to install rules into iptables!"|tee -a $LOG;
  echo "See the log: $LOG";
  exit 1;
fi;

echo "Rules installed successfully";
